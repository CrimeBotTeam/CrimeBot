#!/usr/bin/env node

'use strict'

const express = require('express');
const request = require('request');
var mongoose = require('mongoose');
const fb = require('../fb.js');
const db = require('../db.js');


db.connect();

//using the db to async get all users of the database, then
//have inline callback function print it out to the console
//need to replace the console print with the actual actions we want to happen
//note: should i use this async callback method instead of the
//two different functions i have below?
db.getAll(function(users){
  //console.log(users);
  processNotifs(users);
  //here is where i think should be each doig the actual work of
  //processing the notifs instead of sending them to a new function?
}
);


function processNotifs(users){
  console.log(users);
  console.log("processing Notifs");
  users.forEach(sendNotifs);
}

function sendNotifs(user, index, array){
  console.log("try to sendNotifs to " + user);
}

//fb.sendText(1363762180329593, "Test message sent from scheduler");

console.log("Scheduler Ran My Script");
